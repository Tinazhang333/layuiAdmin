

<title>客服问题</title>
  
<script type="text/html" template>
  <link rel="stylesheet" href="{{ layui.setter.base }}style/template.css?v={{ layui.admin.v }}-1" media="all">
</script>

<div class="layui-card layadmin-header">
  <div class="layui-breadcrumb" lay-filter="breadcrumb">
    <a lay-href="">主页</a>
    <a><cite>页面</cite></a>
    <a><cite>客服问题</cite></a>
  </div>
</div>


              
                <div class="layui-card-body">
                    <div class="layui-row layui-col-space10">
                       <div class="layui-fluid">
                         <div class="layui-card">
                           <div class="layui-form layui-card-header layuiadmin-card-header-auto" lay-filter="layadmin-userfront-formlist">
                             <div class="layui-form-item">
                               <div class="layui-inline">
                                 <label class="layui-form-label">ID</label>
                                 <div class="layui-input-block">
                                   <input type="text" name="id" placeholder="请输入" autocomplete="off" class="layui-input">
                                 </div>
                               </div>
                               <div class="layui-inline">
                                 <label class="layui-form-label">用户名</label>
                                 <div class="layui-input-block">
                                   <input type="text" name="username" placeholder="请输入" autocomplete="off" class="layui-input">
                                 </div>
                               </div>
                               <div class="layui-inline">
                                 <label class="layui-form-label">邮箱</label>
                                 <div class="layui-input-block">
                                   <input type="text" name="email" placeholder="请输入" autocomplete="off" class="layui-input">
                                 </div>
                               </div>
                               <div class="layui-inline">
                                 <label class="layui-form-label">性别</label>
                                 <div class="layui-input-block">
                                   <select name="sex">
                                     <option value="0">不限</option>
                                     <option value="1">男</option>
                                     <option value="2">女</option>
                                   </select>
                                 </div>
                               </div>
                               <div class="layui-inline">
                                 <button class="layui-btn layuiadmin-btn-useradmin" lay-submit lay-filter="LAY-user-front-search">
                                   <i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
                                 </button>
                               </div>
                             </div>
                           </div>
                           
                           <div class="layui-card-body">
                             <div style="padding-bottom: 10px;">
                               <button class="layui-btn layuiadmin-btn-useradmin" data-type="batchdel">删除</button>
                               <button class="layui-btn layuiadmin-btn-useradmin" data-type="add">添加</button>
                             </div>
                             
                            <table id="LAY-user-back-menu2-online2" lay-filter="LAY-user-back-menu2-online2"></table>
                         
                            <script type="text/html" id="table-useradmin-admin-menu2-online2">
                              <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i class="layui-icon layui-icon-edit"></i>编辑</a>
                              {{#  if(d.role == '超级管理员'){ }}
                                <a class="layui-btn layui-btn-disabled layui-btn-xs"><i class="layui-icon layui-icon-delete"></i>删除</a>
                              {{#  } else { }}
                                <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i class="layui-icon layui-icon-delete"></i>删除</a>
                              {{#  } }}
                            </script>
							
							
                           </div>
                         </div>
                       </div>
                       
                        
                       
                    </div>
                </div>
         
<script>
                      layui.use('useradmin', layui.factory('useradmin')).use(['admin', 'useradmin', 'table'], function(){
                        var $ = layui.$
                        ,admin = layui.admin
                        ,view = layui.view
                        ,table = layui.table
                        ,form = layui.form;
                        
                        form.render(null, 'layadmin-useradmin-formlist');
                        
                        //监听搜索
                        form.on('submit(LAY-user-back-search)', function(data){
                          var field = data.field;
                          
                          //执行重载
                          table.reload('LAY-user-back-menu2-online2', {
                            where: field
                          });
                        });
                      
                        //事件
                        var active = {
                          batchdel: function(){
                            var checkStatus = table.checkStatus('LAY-user-back-menu2-online2')
                            ,checkData = checkStatus.data; //得到选中的数据
                      
                            if(checkData.length === 0){
                              return layer.msg('请选择数据');
                            }
                            
                            layer.prompt({
                              formType: 1
                              ,title: '敏感操作，请验证口令'
                            }, function(value, index){
                              layer.close(index);
                              
                              layer.confirm('确定删除吗？', function(index) {
                                
                                //执行 Ajax 后重载
                                /*
                                admin.req({
                                  url: 'xxx'
                                  //,……
                                });
                                */
                                table.reload('LAY-user-back-menu2-online2');
                                layer.msg('已删除');
                              });
                            }); 
                          }
                          ,add: function(){
                            admin.popup({
                              title: '添加管理员'
                              ,area: ['420px', '450px']
                              ,id: 'LAY-popup-useradmin-add'
                              ,success: function(layero, index){
                                view(this.id).render('user/administrators/adminform').done(function(){
                                  form.render(null, 'layuiadmin-form-admin');
                                  
                                  //监听提交
                                  form.on('submit(LAY-user-back-submit)', function(data){
                                    var field = data.field; //获取提交的字段
                      
                                    //提交 Ajax 成功后，关闭当前弹层并重载表格
                                    //$.ajax({});
                                    layui.table.reload('LAY-user-back-menu2-online2'); //重载表格
                                    layer.close(index); //执行关闭 
                                  });
                                });
                              }
                            });
                          }
                        }  
                        $('.layui-btn.layuiadmin-btn-admin').on('click', function(){
                          var type = $(this).data('type');
                          active[type] ? active[type].call(this) : '';
                        });
                      });
                      </script>
<script>
    layui.use('sample', layui.factory('sample'));
</script>
